version: '3.8'

services:
  caddy:
    container_name: caddy
    image: caddy:latest
    ports:
      - 80:80
      - 443:443
    volumes:
      - ./caddyfile.dev:/etc/caddy/Caddyfile:rw
    restart: always
    networks:
      - caddy
    depends_on:
      - web

  web:
    container_name: web
    image: web:dev
    volumes:
      - ./src/web/web:/app/web
      - ./src/web/assets:/app/assets
      - ./src/web/rxconfig.py:/app/rxconfig.py
    networks:
      - caddy

networks:
  caddy:
    name: caddy
    external: true
